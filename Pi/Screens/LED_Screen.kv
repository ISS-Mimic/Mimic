<LED_Screen>:
    name: 'led'
    
    # Background and title
    Label:
        text: 'LED Testing Interface'
        font_size: self.height * 0.6
        size_hint: 0.8, 0.08
        pos_hint: {"center_x": 0.5, "center_y": 0.95}
        color: 1, 1, 1, 1
        
    # ===== COLOR SELECTOR SECTION =====
    Label:
        text: 'Select Color'
        font_size: self.height * 0.6
        size_hint: 0.8, 0.05
        pos_hint: {"center_x": 0.5, "center_y": 0.87 }
        color: 1, 1, 0, 1
        
    # Color Grid (4x3 layout)
    GridLayout:
        cols: 4
        rows: 3
        size_hint: 0.8, 0.2
        pos_hint: {"center_x": 0.5, "center_y": 0.75}
        spacing: '5dp'
        padding: '5dp'
        
        Button:
            text: 'Red'
            size_hint: 1, 1
            on_release: root.set_color('Red')
            background_color: 1, 0, 0, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Green'
            size_hint: 1, 1
            on_release: root.set_color('Green')
            background_color: 0, 1, 0, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Blue'
            size_hint: 1, 1
            on_release: root.set_color('Blue')
            background_color: 0, 0, 1, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'White'
            size_hint: 1, 1
            on_release: root.set_color('White')
            background_color: 1, 1, 1, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Yellow'
            size_hint: 1, 1
            on_release: root.set_color('Yellow')
            background_color: 1, 1, 0, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Magenta'
            size_hint: 1, 1
            on_release: root.set_color('Magenta')
            background_color: 1, 0, 1, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Cyan'
            size_hint: 1, 1
            on_release: root.set_color('Cyan')
            background_color: 0, 1, 1, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Orange'
            size_hint: 1, 1
            on_release: root.set_color('Orange')
            background_color: 1, 0.5, 0, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Purple'
            size_hint: 1, 1
            on_release: root.set_color('Purple')
            background_color: 0.5, 0, 0.5, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Pink'
            size_hint: 1, 1
            on_release: root.set_color('Pink')
            background_color: 1, 0.75, 0.8, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Gold'
            size_hint: 1, 1
            on_release: root.set_color('Gold')
            background_color: 1, 0.84, 0, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Off'
            size_hint: 1, 1
            on_release: root.set_color('Off')
            background_color: 0.3, 0.3, 0.3, 1
            font_size: self.height * 0.6
    
    # ===== SOLAR ARRAYS SECTION =====
    Label:
        text: 'Solar Arrays'
        font_size: self.height * 0.6
        size_hint: 0.8, 0.05
        pos_hint: {"center_x": 0.5, "center_y": 0.62}
        color: 1, 1, 0, 1
        
    # Solar Array Grid (2x4 layout)
    GridLayout:
        cols: 4
        rows: 2
        size_hint: 0.8, 0.15
        pos_hint: {"center_x": 0.5, "center_y": 0.53}
        spacing: '8dp'
        padding: '8dp'
        
        Button:
            text: '1B'
            size_hint: 1, 1
            on_release: root.test_solar_array('1b')
            background_color: 0.2, 0.6, 1, 1
            font_size: self.height * 0.6
            
        Button:
            text: '3A'
            size_hint: 1, 1
            on_release: root.test_solar_array('3a')
            background_color: 0.2, 0.6, 1, 1
            font_size: self.height * 0.6
            
        Button:
            text: '2A'
            size_hint: 1, 1
            on_release: root.test_solar_array('2a')
            background_color: 0.2, 0.6, 1, 1
            font_size: self.height * 0.6
            
        Button:
            text: '4B'
            size_hint: 1, 1
            on_release: root.test_solar_array('2b')
            background_color: 0.2, 0.6, 1, 1
            font_size: self.height * 0.6
            
        Button:
            text: '3B'
            size_hint: 1, 1
            on_release: root.test_solar_array('3b')
            background_color: 0.2, 0.6, 1, 1
            font_size: self.height * 0.6
            
        Button:
            text: '1A'
            size_hint: 1, 1
            on_release: root.test_solar_array('1a')
            background_color: 0.2, 0.6, 1, 1
            font_size: self.height * 0.6
            
        Button:
            text: '4A'
            size_hint: 1, 1
            on_release: root.test_solar_array('4a')
            background_color: 0.2, 0.6, 1, 1
            font_size: self.height * 0.6
            
        Button:
            text: '2B'
            size_hint: 1, 1
            on_release: root.test_solar_array('2b')
            background_color: 0.2, 0.6, 1, 1
            font_size: self.height * 0.6
    
    
    # ===== ANIMATIONS SECTION =====
    Label:
        text: 'Animations'
        font_size: self.height * 0.6
        size_hint: 0.8, 0.05
        pos_hint: {"center_x": 0.5, "center_y": 0.42}
        color: 1, 1, 0, 1
        
    # Animation Grid
    GridLayout:
        cols: 4
        rows: 1
        size_hint: 0.8, 0.08
        pos_hint: {"center_x": 0.5, "center_y": 0.36}
        spacing: '10dp'
        padding: '5dp'
        
        Button:
            text: 'Pulse'
            size_hint: 1, 1
            on_release: root.test_pulse_animation()
            background_color: 0.3, 1, 0.3, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Chase'
            size_hint: 1, 1
            on_release: root.test_chase_animation()
            background_color: 1, 0.6, 0.3, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Disco'
            size_hint: 1, 1
            on_release: root.test_disco_mode()
            background_color: 1, 0.3, 0.8, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Stop'
            size_hint: 1, 1
            on_release: root.stop_animations()
            background_color: 0.8, 0.3, 0.3, 1
            font_size: self.height * 0.6
    
    # ===== SPECIAL FUNCTIONS SECTION =====
    Label:
        text: 'Special Functions'
        font_size: self.height * 0.6
        size_hint: 0.8, 0.05
        pos_hint: {"center_x": 0.5, "center_y": 0.28}
        color: 1, 1, 0, 1
        
    # Special Functions Grid
    GridLayout:
        cols: 3
        rows: 1
        size_hint: 0.8, 0.08
        pos_hint: {"center_x": 0.5, "center_y": 0.22}
        spacing: '10dp'
        padding: '5dp'
        
        Button:
            text: 'Light All'
            size_hint: 1, 1
            on_release: root.light_everything()
            background_color: 0.3, 1, 0.3, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'All Off'
            size_hint: 1, 1
            on_release: root.turn_off_all()
            background_color: 0.8, 0.3, 0.3, 1
            font_size: self.height * 0.6
            
        Button:
            text: 'Reset'
            size_hint: 1, 1
            on_release: root.reset_leds()
            background_color: 1, 0.6, 0.3, 1
            font_size: self.height * 0.6
            
    # ---------- STATUS DISPLAY (Bottom Rectangle) ----------
    Label:
        id: status_label
        text: root.get_test_status()
        size_hint: 1, 0.07
        background_color: 0, 0, 0, 0.8  # Semi-transparent black
        color: 0, 1, 0, 1  # Green text
        font_size: self.height * 0.6  # Scale font to label height
        text_size: self.size
        halign: 'center'
        valign: 'middle'
        pos_hint: {"center_x": 0.57, "center_y": 0.07}
    
    # ---------- BOTTOM TOOLBAR ----------
    Image:
        id: signal
        source: f"{root.mimic_directory}/Mimic/Pi/imgs/signal/signalred.zip"
        size_hint_y: 0.112
        anim_delay: 0.05
        anim_loop: 0
        fit_mode: "scale-down"
        pos_hint: {"center_x": 0.05, "center_y": 0.07}
    
    Image:
        id: arduino
        source: f"{root.mimic_directory}/Mimic/Pi/imgs/signal/arduino_offline.png"
        size_hint_y: 0.15
        anim_delay: 0.2
        anim_loop: -1
        fit_mode: "scale-down"
        pos_hint: {"center_x": 0.14, "center_y": 0.08}
    
    Label:
        id: arduino_count
        pos_hint: {"center_x": 0.14, "center_y": 0.08}
        text: ''
        markup: True
        color: 1, 1, 1, 1
        font_size: self.height * 1
        size_hint: 0.06, 0.08
    
    # ─────────────────────── Navigation ────────────────────────────────

    Button:
        size_hint: 0.1, 0.11
        pos_hint: {"center_x": 0.9375, "center_y": 0.07}
        background_normal: f'{root.mimic_directory}/Mimic/Pi/imgs/eva/BackButton.png'
        background_down: f'{root.mimic_directory}/Mimic/Pi/imgs/eva/BackButton.png'
        border: 0,0,0,0    # avoid 9-slice margins
        on_release: root.manager.current = 'main'