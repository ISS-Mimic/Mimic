#:import dp kivy.metrics.dp

<RS_Screen>:
    name: 'rs'
    FloatLayout:
        # ───────────────────────── Background ──────────────────────────────
        Image:
            source: f'{root.mimic_directory}/Mimic/Pi/imgs/russian/ROSbackground.png'
            fit_mode: "fill"
        
        # ───────────────────────── Port Icons ─────────────────────────────
        Image:
            id: sma_soyuz
            source: f"{root.mimic_directory}/Mimic/Pi/imgs/russian/SMAsoyuzROS.png"
            opacity: 0.0
        Image:
            id: sma_progress
            source: f"{root.mimic_directory}/Mimic/Pi/imgs/russian/SMAprogressROS.png"
            opacity: 0.0
        Image:
            id: mrm2_soyuz
            source: f"{root.mimic_directory}/Mimic/Pi/imgs/russian/MRM2soyuzROS.png"
            opacity: 0.0
        Image:
            id: mrm2_progress
            source: f"{root.mimic_directory}/Mimic/Pi/imgs/russian/MRM2progressROS.png"
            opacity: 0.0
        Image:
            id: mrm1_soyuz
            source: f"{root.mimic_directory}/Mimic/Pi/imgs/russian/MRM1soyuzROS.png"
            opacity: 0.0
        Image:
            id: mrm1_progress
            source: f"{root.mimic_directory}/Mimic/Pi/imgs/russian/MRM1progressROS.png"
            opacity: 0.0
        Image:
            id: rsn_soyuz
            source: f"{root.mimic_directory}/Mimic/Pi/imgs/russian/RSNsoyuzROS.png"
            opacity: 0.0
        Image:
            id: rsn_progress
            source: f"{root.mimic_directory}/Mimic/Pi/imgs/russian/RSNprogressROS.png"
            opacity: 0.0
        
        # ───────────────────────── Labels (RS Node Nadir) ─────────────────
        Label:
            id: rsn_label
            pos_hint: {"center_x": 0.37, "center_y": 0.2}
            text: ''
            font_size: min(self.height * 0.25, dp(18))
            text_size: 200, None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 0, 0, 1
        Label:
            id: rsn_mission
            pos_hint: {"center_x": 0.65, "center_y": 0.39}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: rsn_vehicle
            pos_hint: {"center_x": 0.65, "center_y": 0.35}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: rsn_spacecraft
            pos_hint: {"center_x": 0.65, "center_y": 0.31}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: rsn_arrival
            pos_hint: {"center_x": 0.65, "center_y": 0.27}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: rsn_departure
            pos_hint: {"center_x": 0.65, "center_y": 0.23}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        
        # ───────────────────────── Labels (Service Module Aft) ────────────
        Label:
            id: sma_label
            pos_hint: {"center_x": 0.15, "center_y": 0.71}
            text: ''
            font_size: min(self.height * 0.25, dp(18))
            text_size: 200, None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 0, 0, 1
        Label:
            id: sma_mission
            pos_hint: {"center_x": 0.65, "center_y": 0.75}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: sma_vehicle
            pos_hint: {"center_x": 0.65, "center_y": 0.71}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: sma_spacecraft
            pos_hint: {"center_x": 0.65, "center_y": 0.67}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: sma_arrival
            pos_hint: {"center_x": 0.65, "center_y": 0.63}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: sma_departure
            pos_hint: {"center_x": 0.65, "center_y": 0.59}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        
        # ───────────────────────── Labels (MRM-1) ─────────────────────────
        Label:
            id: mrm1_label
            pos_hint: {"center_x": 0.435, "center_y": 0.3}
            text: ''
            font_size: min(self.height * 0.25, dp(18))
            text_size: 200, None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 0, 0, 1
        Label:
            id: mrm1_mission
            pos_hint: {"center_x": 0.92, "center_y": 0.39}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: mrm1_vehicle
            pos_hint: {"center_x": 0.92, "center_y": 0.35}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: mrm1_spacecraft
            pos_hint: {"center_x": 0.92, "center_y": 0.31}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: mrm1_arrival
            pos_hint: {"center_x": 0.92, "center_y": 0.27}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: mrm1_departure
            pos_hint: {"center_x": 0.92, "center_y": 0.23}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        
        # ───────────────────────── Labels (MRM-2) ─────────────────────────
        Label:
            id: mrm2_label
            pos_hint: {"center_x": 0.37, "center_y": 0.82}
            text: ''
            font_size: min(self.height * 0.25, dp(18))
            text_size: 200, None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 0, 0, 1
        Label:
            id: mrm2_mission
            pos_hint: {"center_x": 0.92, "center_y": 0.75}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: mrm2_vehicle
            pos_hint: {"center_x": 0.92, "center_y": 0.71}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: mrm2_spacecraft
            pos_hint: {"center_x": 0.92, "center_y": 0.67}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: mrm2_arrival
            pos_hint: {"center_x": 0.92, "center_y": 0.63}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1
        Label:
            id: mrm2_departure
            pos_hint: {"center_x": 0.92, "center_y": 0.59}
            text: '-'
            text_size: 300,None
            halign: 'left'
            bold: True
            markup: True
            color: 1, 1, 1, 1

        # ───────────────────────── Buttons / Status ───────────────────────
        Button:
            background_normal: f'{root.mimic_directory}/Mimic/Pi/imgs/russian/DockingUnlit.png'
            background_down: f'{root.mimic_directory}/Mimic/Pi/imgs/russian/DockingDown.png'
            size_hint: 0.1, 0.13
            pos_hint: {"x": 0.0, "y": 0.2}
            width: 50
            height:20
            on_release: root.manager.current = 'rs_dock'

       # ---------- STATUS DISPLAY (Bottom Rectangle) ----------
        Label:
            id: status_label
            text: ''
            size_hint: 1, 0.07
            background_color: 0, 0, 0, 0.8  # Semi-transparent black
            color: 0, 1, 0, 1  # Green text
            font_size: self.height * 0.6  # Scale font to label height
            text_size: self.size
            halign: 'center'
            valign: 'middle'
            pos_hint: {"center_x": 0.57, "center_y": 0.07}
        
        # ---------- BOTTOM TOOLBAR ----------
        Image:
            id: signal
            source: f"{root.mimic_directory}/Mimic/Pi/imgs/signal/signalred.zip"
            size_hint_y: 0.112
            anim_delay: 0.05
            anim_loop: 0
            fit_mode: "scale-down"
            pos_hint: {"center_x": 0.05, "center_y": 0.07}
        
        Image:
            id: arduino
            source: f"{root.mimic_directory}/Mimic/Pi/imgs/signal/arduino_offline.png"
            size_hint_y: 0.15
            anim_delay: 0.2
            anim_loop: -1
            fit_mode: "scale-down"
            pos_hint: {"center_x": 0.14, "center_y": 0.08}
        
        Label:
            id: arduino_count
            pos_hint: {"center_x": 0.14, "center_y": 0.08}
            text: ''
            markup: True
            color: 1, 1, 1, 1
            font_size: self.height * 1
            size_hint: 0.06, 0.08
        
        # ─────────────────────── Navigation ────────────────────────────────

        Button:
            size_hint: 0.1, 0.11
            pos_hint: {"center_x": 0.9375, "center_y": 0.07}
            background_normal: f'{root.mimic_directory}/Mimic/Pi/imgs/eva/BackButton.png'
            background_down: f'{root.mimic_directory}/Mimic/Pi/imgs/eva/BackButton.png'
            border: 0,0,0,0    # avoid 9-slice margins
            on_release: app.root.current = 'mimic'