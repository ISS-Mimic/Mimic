<Crew_Screen>:
    name: 'crew'
    
    FloatLayout:
        # Background
        #Image:
        #    id: Crew_background
        #    source: f'{root.mimic_directory}/Mimic/Pi/imgs/crew/CrewBackground.png'
        #    fit_mode: "fill"
        
        # Top Left - Expedition Title
        Label:
            id: expedition_title
            pos_hint: {"center_x": 0.25, "center_y": 0.92}
            text: root.expedition_number
            markup: True
            color: 0, 1, 0, 1  # Bright green
            font_size: dp(32)
            bold: True
        
        # Top Center - Expedition Duration Timer
        Label:
            id: expedition_duration_label
            pos_hint: {"center_x": 0.5, "center_y": 0.92}
            text: 'EXPEDITION DURATION:'
            markup: True
            color: 1, 1, 1, 1
            font_size: dp(16)
            bold: True
        
        Label:
            id: expedition_duration_timer
            pos_hint: {"center_x": 0.5, "center_y": 0.86}
            text: root.expedition_duration
            markup: True
            color: 0, 1, 1, 1  # Cyan for timer
            font_size: dp(24)
            bold: True
            halign: 'center'
        
        # Top Right - ISS Continuously Crewed Time
        Label:
            id: iss_crewed_time_label
            pos_hint: {"center_x": 0.85, "center_y": 0.92}
            text: 'ISS HAS BEEN CONTINUOUSLY CREWED FOR:'
            markup: True
            color: 1, 1, 1, 1
            font_size: dp(16)
            bold: True
        
        Label:
            id: ISS_crewed_years
            pos_hint: {"center_x": 0.715, "center_y": 0.86}
            text: root.iss_crewed_years
            markup: True
            color: 1, 1, 1, 1
            font_size: dp(24)
            bold: True
        
        Label:
            id: ISS_crewed_months
            pos_hint: {"center_x": 0.80, "center_y": 0.86}
            text: root.iss_crewed_months
            markup: True
            color: 1, 1, 1, 1
            font_size: dp(24)
            bold: True
        
        Label:
            id: ISS_crewed_days
            pos_hint: {"center_x": 0.915, "center_y": 0.86}
            text: root.iss_crewed_days
            markup: True
            color: 1, 1, 1, 1
            font_size: dp(24)
            bold: True
        
        # Time format labels
        Label:
            pos_hint: {"center_x": 0.715, "center_y": 0.82}
            text: 'Years'
            markup: True
            color: 1, 1, 1, 1
            font_size: dp(12)
        
        Label:
            pos_hint: {"center_x": 0.80, "center_y": 0.82}
            text: 'Months'
            markup: True
            color: 1, 1, 1, 1
            font_size: dp(12)
        
        Label:
            pos_hint: {"center_x": 0.915, "center_y": 0.82}
            text: 'Days'
            markup: True
            color: 1, 1, 1, 1
            font_size: dp(12)
        
        # Total People on the ISS
        Label:
            id: total_crew_count_label
            pos_hint: {"center_x": 0.85, "center_y": 0.75}
            text: 'Number of People on ISS'
            markup: True
            color: 1, 1, 1, 1
            font_size: dp(14)
            bold: True
        
        Label:
            id: total_crew_count
            pos_hint: {"center_x": 0.85, "center_y": 0.70}
            text: '7'
            markup: True
            color: 0, 1, 0, 1
            font_size: dp(20)
            bold: True
        
        # Main Crew Display Area (Left Side)
        ScrollView:
            pos_hint: {"center_x": 0.35, "center_y": 0.5}
            size_hint: 0.6, 0.6
            
            GridLayout:
                id: crew_container
                cols: 3
                spacing: dp(20)
                padding: dp(20)
                size_hint_y: None
                height: self.minimum_height
                # Crew widgets will be added here dynamically
        
        # Right Side - Expedition Mission Patch
        Image:
            id: expedition_patch
            pos_hint: {"center_x": 0.83, "center_y": 0.65}
            size_hint: 0.25, 0.25
            source: f'{root.mimic_directory}/Mimic/Pi/imgs/crew/Expedition_Patch.png'
            fit_mode: "scale-down"
        
        Label:
            id: expedition_patch_label
            pos_hint: {"center_x": 0.83, "center_y": 0.55}
            text: root.expedition_number
            markup: True
            color: 1, 1, 1, 1
            font_size: dp(14)
            bold: True
            halign: 'center'
        
        # Right Side - Crewed Vehicles Section
        Label:
            id: crewed_vehicles_title
            pos_hint: {"center_x": 0.83, "center_y": 0.45}
            text: 'Crewed Vehicles Docked'
            markup: True
            color: 1, 1, 1, 1
            font_size: dp(16)
            bold: True
            halign: 'center'
        
        # Crewed Vehicles List
        ScrollView:
            pos_hint: {"center_x": 0.83, "center_y": 0.35}
            size_hint: 0.25, 0.25
            
            GridLayout:
                id: crewed_vehicles_container
                cols: 1
                spacing: dp(5)
                padding: dp(5)
                size_hint_y: None
                height: self.minimum_height
                # Crewed vehicle widgets will be added here dynamically
        
        # Legend
        BoxLayout:
            pos_hint: {"center_x": 0.5, "center_y": 0.16}
            size_hint: 0.8, 0.1
            orientation: 'horizontal'
            spacing: dp(20)
            
            Label:
                text: 'CMDR = Commander'
                color: 0, 1, 0, 1
                font_size: dp(12)
                bold: True
            
            Label:
                text: 'FE = Flight Engineer'
                color: 1, 1, 1, 1
                font_size: dp(12)
                bold: True
            
            Label:
                text: 'Days on Orbit / Total Days in Space'
                color: 1, 1, 1, 1
                font_size: dp(12)
                bold: True
        
        # Bottom Left - System Status Icons
        Image:
            id: signal
            source: f"{root.mimic_directory}/Mimic/Pi/imgs/signal/signalred.zip"
            size_hint_y: 0.112
            anim_delay: 0.05
            anim_loop: 0
            fit_mode: "scale-down"
            pos_hint: {"center_x": 0.05, "center_y": 0.07}
        
        Image:
            id: arduino
            source: f"{root.mimic_directory}/Mimic/Pi/imgs/signal/arduino_offline.png"
            size_hint_y: 0.15
            anim_delay: 0.2
            anim_loop: 0
            fit_mode: "scale-down"
            pos_hint: {"center_x": 0.14, "center_y": 0.08}
        
        Label:
            id: arduino_count
            pos_hint: {"center_x": 0.14, "center_y": 0.08}
            text: ''
            markup: True
            color: 1, 1, 1, 1
            font_size: dp(20)
            size_hint_y: 0.5
        

        
        # Back Button
        Button:
            size_hint: 0.1, 0.11
            pos_hint: {"center_x": 0.9375, "center_y": 0.082}
            background_normal: f'{root.mimic_directory}/Mimic/Pi/imgs/eva/BackButton.png'
            on_release: app.root.current = 'mimic'

# Crew Member Widget Template
<CrewMemberWidget>:
    canvas.before:
        Color:
            rgba: 0.2, 0.2, 0.2, 0.8
        Rectangle:
            pos: self.pos
            size: self.size
    
    orientation: 'vertical'
    size_hint_y: None
    height: dp(200)
    padding: dp(10)
    spacing: dp(5)
    
    # Crew Member Photo (placeholder)
    Image:
        source: f'{root.mimic_directory}/Mimic/Pi/imgs/crew/CrewBase.png'
        size_hint: 0.8, 0.4
        pos_hint: {"center_x": 0.5, "center_y": 0.8}
        fit_mode: "scale-down"
    
    # Crew Member Name
    Label:
        text: root.name
        color: 1, 1, 1, 1
        font_size: dp(16)
        bold: True
        size_hint_y: 0.2
    
    # Country Flag (placeholder - would need actual flag images)
    Label:
        text: root.country
        color: 0.8, 0.8, 0.8, 1
        font_size: dp(12)
        size_hint_y: 0.15
    
    # Role (Commander/Flight Engineer)
    Label:
        text: root.role
        color: 0, 1, 0, 1  # Green for role
        font_size: dp(14)
        bold: True
        size_hint_y: 0.15
    
    # Mission Days / Total Days
    Label:
        text: f"{root.mission_days} / {root.total_days}"
        color: 1, 1, 1, 1
        font_size: dp(12)
        size_hint_y: 0.15
    
    # Spacecraft Info
    Label:
        text: root.spacecraft
        color: 0.7, 0.7, 1, 1  # Light blue for spacecraft
        font_size: dp(10)
        size_hint_y: 0.15
